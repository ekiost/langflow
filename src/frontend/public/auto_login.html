<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Langflow Iframe Login Example</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
<div class="w-screen h-screen mx-auto p-6 flex flex-col">
    <h1 class="text-3xl font-bold mb-6 text-center">Langflow Iframe Login Example</h1>
    <iframe
            id="langflowFrame"
            src="http://localhost:3000"
            title="Langflow"
            class="w-full h-full border border-gray-300 rounded-md"
    ></iframe>
</div>

<script>
    const iframe = document.getElementById('langflowFrame');
    const langflowOrigin = 'http://localhost:3000';

    // These are the credentials to be sent to the iframe
    const credentials = {
        username: "admin",
        password: "123456"
    };

    // 1. Listen for the 'ready' message from the iframe
    window.addEventListener('message', (event) => {
        // IMPORTANT: Verify the message is from our trusted iframe
        if (event.origin !== langflowOrigin) {
            return;
        }

        // 2. Check if the message type is what we expect
        if (event.data.type === 'ready') {
            console.log("Parent received 'ready' signal from iframe. Sending credentials.");

            // 3. Send the credentials to the iframe
            iframe.contentWindow.postMessage(
                {
                    type: 'credentials',
                    credentials: credentials
                },
                langflowOrigin // Target the iframe's origin
            );
        }
    });
</script>
</body>
</html>